<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Code Display with Copy to Clipboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        textarea {
            width: 100%;
            height: 400px;
            font-family: monospace;
            border: 1px solid #ccc;
            padding: 10px;
            box-sizing: border-box;
            background-color: #f4f4f4;
            color: #333;
        }

        button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

    <h1>JavaScript Code: Copy to Clipboard</h1>
    <textarea id="scriptText" readonly>
javascript:(function() {
  if (document.getElementById("ttrs-chat") || document.getElementById("ttrs-hack-panel")) return;

  let helperPanel = document.createElement("div");
  helperPanel.id = "ttrs-hack-panel";
  helperPanel.style = "position:fixed;bottom:80px;right:20px;z-index:9999;background:#f4f4f4;color:#333;padding:10px;border:1px solid #ccc;border-radius:10px;font-family:sans-serif;font-size:13px;box-shadow:0 4px 8px rgba(0,0,0,0.1);min-width:200px;";
  helperPanel.innerHTML = `
    <strong>⚙️ TTRS Helper</strong><br>
    Answers: <span id="ttrs-count">0</span><br>
    <button id="ttrs-start">Start</button>
    <button id="ttrs-stop">Stop</button><br>
    <input id="ttrs-help" placeholder="Delay (ms)" style="width:100%;margin:4px 0;">
    <input id="ttrs-max" placeholder="Max Answers" style="width:100%;"><br>
    <button id="ttrs-hide">Hide</button>
  `;
  document.body.appendChild(helperPanel);

  let intervalId = null, delay = 600, answerCount = 0, maxAnswers = Infinity, isPaused = false;

  function startHack() {
    if (intervalId) clearInterval(intervalId);
    answerCount = 0;
    updateCount();
    intervalId = setInterval(getAnswer, delay);
  }

  function stopHack() {
    clearInterval(intervalId);
    intervalId = null;
  }

  function restartHack() {
    stopHack();
    startHack();
  }

  function updateCount() {
    document.getElementById("ttrs-count").textContent = answerCount;
  }

  function getAnswer() {
    if (isPaused) return;
    if (answerCount >= maxAnswers) {
      stopHack();
      alert("Max answers reached.");
      return;
    }
    let q = document.querySelector("ttr-game-question:nth-child(2)");
    if (!q) return;
    let t = q.innerText.trim().replace("×", "*").replace("÷", "/");
    let a;
    try {
      let parts = t.match(/(\d+)\s*([*/])\s*(\d+)/);
      if (!parts) return;
      a = parts[2] === "*" ? (parseInt(parts[1]) * parseInt(parts[3])) : (parseInt(parts[1]) / parseInt(parts[3]));
      a = Math.floor(a);
    } catch (err) {
      console.error("Parse error", err);
      return;
    }
    let keys = [...document.querySelectorAll("ttr-game-numpad .key-n")];
    let enter = document.querySelector("ttr-game-numpad .key-ent");
    if (!enter) return;
    a.toString().split('').forEach(c => {
      let k = keys.find(k => k.textContent === c);
      if (k) k.click();
    });
    enter.click();
    answerCount++;
    updateCount();
  }

  document.getElementById("ttrs-start").onclick = startHack;
  document.getElementById("ttrs-stop").onclick = stopHack;
  document.getElementById("ttrs-help").onchange = function() {
    delay = parseInt(this.value) || 600;
    restartHack();
  };
  document.getElementById("ttrs-max").onchange = function() {
    let val = parseInt(this.value);
    maxAnswers = (val > 0) ? val : Infinity;
  };
  document.getElementById("ttrs-hide").onclick = function() {
    helperPanel.style.display = "none";
  };

  document.addEventListener("keydown", function(e) {
    if (e.shiftKey && e.key === "T") {
      helperPanel.style.display = (helperPanel.style.display === "none") ? "block" : "none";
    }
    if (e.shiftKey && e.key === "P") {
      isPaused = !isPaused;
      console.log(isPaused ? "Paused" : "Resumed");
    }
  });

  let chatPanel = document.createElement("div");
  chatPanel.id = "ttrs-chat";
  chatPanel.style = "position:fixed;bottom:10px;left:10px;width:300px;height:400px;background:white;z-index:9999;border:1px solid #ccc;border-radius:15px;padding:10px;font-family:sans-serif;display:flex;flex-direction:column;box-shadow:0 4px 8px rgba(0,0,0,0.1);";

  chatPanel.innerHTML = `
    <div id="chatBox" style="flex:1;overflow:auto;margin-bottom:5px;padding:4px;border:1px solid #eee;background-color:#f9f9f9;border-radius:10px;height:calc(100% - 100px);"></div>
    <input id="username" placeholder="Username" style="margin:2px 0;padding:6px;width:100%;border-radius:5px;">
    <input id="message" placeholder="Message" style="margin:2px 0;padding:6px;width:100%;border-radius:5px;">
    <button id="send" style="padding:6px 12px;margin:2px 0;border-radius:5px;background-color:#4CAF50;color:white;">Send</button>
  `;
  document.body.appendChild(chatPanel);

  let socketScript = document.createElement("script");
  socketScript.src = "https://cdn.socket.io/4.0.1/socket.io.min.js";
  socketScript.onload = function() {
    let socket = io("https://gigantic-poised-sturgeon.glitch.me/");

    document.getElementById("send").onclick = () => {
      const username = document.getElementById("username").value.trim();
      const message = document.getElementById("message").value.trim();
      if (username && message) {
        socket.emit("chatMessage", { username, message });
        document.getElementById("message").value = "";
      }
    };

    document.getElementById("message").addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        document.getElementById("send").click();
      }
    });

    socket.on("chatMessage", (data) => {
      const chatBox = document.getElementById("chatBox");
      const msgDiv = document.createElement("div");
      msgDiv.textContent = `${data.username}: ${data.message}`;
      chatBox.appendChild(msgDiv);
      chatBox.scrollTop = chatBox.scrollHeight;
    });
  };
  document.body.appendChild(socketScript);

  let mobileSpaceBar = document.createElement("button");
  mobileSpaceBar.id = "mobile-spacebar";
  mobileSpaceBar.style = "position:fixed;bottom:0;left:50%;transform:translateX(-50%);z-index:10000;width:100%;height:50px;background-color:#4CAF50;color:white;border:none;border-radius:5px;font-size:18px;";
  mobileSpaceBar.textContent = "Space";
  mobileSpaceBar.onclick = () => {
    let event = new KeyboardEvent('keydown', { key: ' ' });
    document.dispatchEvent(event);
  };
  document.body.appendChild(mobileSpaceBar);
})();
    </textarea>
    
    <button onclick="copyToClipboard()">Copy to Clipboard</button>

    <script>
        function copyToClipboard() {
            var copyText = document.getElementById("scriptText");
            copyText.select();
            copyText.setSelectionRange(0, 99999);  // For mobile devices
            document.execCommand("copy");
            alert("Script copied to clipboard!");
        }
    </script>

</body>
</html>
